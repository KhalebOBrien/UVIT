
# УВИТ - Програмски језик ЈаваСкрипт

[Владимир Филиповић](https://vladofilipovic.github.io/index-cy.html){:target="_blank"}

## Модули

Модуларни концепт програмирања је тренутно један од најзаступљенијих концепата у модерном ЈаваСкрипт програмирању. Заснива се на разбијању једне велике апликације на мање, енкапсулиране, независне делове кода – **модуле**. Циљ модуларности јесте да се смањи комплексност према принципу “подели па владај”.

Најзначајније предности модуларног програмирања су:

- прегледнија и разумљивија апликација

- лакше контролисање опсега дефинисаносту промењивих

- спречавање да глобални опсег дефинисаности буде "загађен"

- поновна употребљивост кода

- могућност рада на истом пројекту више различитих тимова или програмера који раде одвојене мање задатке.

- лакше дебагирање

У зависности од верзије ЈаваСкрипта постоје различити приступи реализацији модуларног програмирања, па самим тим и различите синтаксе које омогућавају модуларно програмирање:

- Нативна ЕС5 синтакса

- ЕС5 синткаса са спољним библиотекама

- Синтакса ЕС6 модула

Проблем учитавања модула није тривијалан (модули зависе од других модула, треба се ефикасно реализовати, итд.) па се за решавање овог проблема користе посебни програми тзв. алати за учитавање и за увезивање модула.

### Нативни ES5 модули

У време писања ЈаваСкрипта, модуларно програмирање није било планирано као начин програмирања, тако да ЈаваСкипт све до верзије ЕС6 (ЕС2015) нема уграђену подршку за модуле. У оквиру нативног ЕС5 се користе разни обрасци (енгл. pattern) који имају сличности са модуларним програмирањем, али који немају баш све карактеристике “чистокрвног модуларног шаблона”.

### ES5 модули преко спољних библиотека

Управо због недостатка подршке за модуле у ЕС5, креиране су спољашње синтаксе које језику дају недостајућу функционалност:

- CommonJS модули

- Асинхрона дефиниција модула (енгл. Asynchronous Module Definition  - AMD)

- Универзална дефиниција модула (енгл. Universal modul definition - UMD)

CommonJS учитава модуле синхроно и због тога се најчешће користи за рад са модулима на серверској страни у окружењу node.js. Иако није планиран за рад наклијентској страни, тј. унутар прегледача, уз помоћ алата за увезивање модула је могуће прилагодити CommonJS раду у веб прегледачу.

Асинхрона дефиниција модула, као што јој и само име каже, подржава асихроно учитавање модула што је погодно за рад са модулима у прегледачу.

Универзална дефиниција модула је компатибилна и са AMD и са CommonJS дефиницијом и користи се углавном уколико има потребе да се исти модул учитава на серверу и у веб прегледачу.

### ES6 модули

Уз ЕС6 стиже подршка за модуларни систем уграђена и у сам језик – ECMAScript 6 модули. Нова синтакса још увек није подржана од стране свих прегледача, па је потребно користи алате (нпр. Babel) да би се транспилирала у ЕС5.

Са новом верзијом ЈаваСцрипт-а ЕС6 долази интегрисана подршка за модуларно програмирање:

- Овај приступ подржава модуле који се смештају у датотеке – један модул по датотеци.
- Модули су јединствени примерци (синглотни), сваки модул се извршава само једном.
- ЕС6 модули могу да раде и синхроно и асихроно.
- Подржана је циклична зависност модула.
- Синтакса је још компактнија од ЦоммоњС.

ЕС модули имају статичку структуру. Пошто је структура модула непромењива, често је довољно да се прегледа код и схвати шта се где увози. Ово није случај код динамичке структуре, где је често потребно да се програмски код изврши да би се видело шта се увози.

Стога, код овог приступа, евентуалне грешке могу да се открију и у време компајлирања (са алатом за увезивање модула), јер се све радње везане за увоз и извоз модула одређују у тренутку увезивања модула.

Сви увезени елементи су непромењиви из модула који их је увезао. Свака операција доделе вредности увеженом елементу би проузроковала грешку (изузетак типа `TypeError`).

ЕС6 се не прави копију својства већ дели везу на то својство. Ово важи чак и за дељење примитивних својстава (својстава која су типа број или ниска).

У наредном примеру ће се видети да, уколико матични модул промени вредност дељеног својства (промена је извршена методом из матичног модула!), модул који је увезао то својсто “види” направљену промену.

### Алати за учитавање и за увезивање модула

Уколико се програмер одлучи за модуларни начин програмирања апликације, он ће се сусрести са проблемом организовања учитавања потребних модула, као и модула од којих су они зависни (енгл. dependinces). Алати за учитавање (енгл. modul loader) и за увезивање модула (енгл. modul bundler) су непоходна подршка програмеру за једноставнији и ефикаснији рад са модулима.

#### Алати за учитавање модула

Алати за учитавање модула омогућавају динамичко учитавање модула водећи рачуна о распореду учитавања, како би се зависни модули раније учитали. Најпознатији алати за учитавање модула су:

- RequireJS – имплементира AMD модуларни систем.

- SystemJS – је универзални алат за учитавање, који може учитавати модуле у било ком популарном формату (CommonjS, UMD, AMD, ES6).

#### Алати за увезивање модула

Алати за увезивање модула решавају проблем тако што компајлирају све модуле у једну датотеку према одређеном реду, водећи рачуна о томе да неки модул од којег зависи други буде учитан на време. Најпознатији алати за увезивање модула:

- Browserify – имплементира CommonjS и у окружењу веб прегледача. Може да се надограшђује разним додацима и уз помоћ извршилаца задатака (енгл. task runner) (најчешће су то алати Gulp или Grunt) може да изврши различите послове.

- Webpack – може учитавати модуле у било ком популарном формату (CommonjS, UMD, AMD, ES6), долази као један пакет и нису му потребни додатци. Поред учитавања модула може да изврши посао транспиловања ЕС6 у ЕС5, као и транспиловање SASS у CSS.

### Литература

1. Haverbeke M.: [Eloquent JavaScript](https://eloquentjavascript.net/){:target="_blank"}

1. [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript){:target="_blank"} - Mozzila Developer Network (MDN)

1. Живановић, Д.: [Веб програмирање - ЈаваСкрипт](https://www.webprogramiranje.org/dogadjaji-u-javascript-u/){:target="_blank"}

1. Copes F.: [Complete JavaScript Handbook](https://medium.freecodecamp.org/the-complete-javascript-handbook-f26b2c71719c){:target="_blank"}
